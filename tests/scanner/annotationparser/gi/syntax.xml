<?xml version="1.0" encoding="UTF-8"?>

<tests xmlns="http://schemas.gnome.org/gobject-introspection/2013/test">

<test>
  <!--
  Not GTK-Doc
  -->
  <input>//Test</input>
</test>

<test>
  <!--
  Not GTK-Doc
  -->
  <input>// Test</input>
</test>

<test>
  <!--
  Not GTK-Doc
  -->
  <input>/**
//</input>
</test>

<test>
  <!--
  Not GTK-Doc
  -->
  <input>/*Test*/</input>
</test>

<test>
  <!--
  Not GTK-Doc
  -->
  <input>/* Test */</input>
</test>

<test>
  <!--
  Not GTK-Doc
  -->
  <input>/* Test
something */</input>
</test>

<test>
  <!--
  Not GTK-Doc
  -->
  <input>/*
Test
something */</input>
</test>

<test>
  <!--
  Not GTK-Doc
  -->
  <input>/**
*/</input>
</test>

<test>
  <input>/** Test **/</input>
  <parser>
    <messages>
      <message>1: Error: Test: Skipping invalid GTK-Doc comment block:
/** Test **/
^</message>
    </messages>
  </parser>
</test>

<test>
  <input>/**Test
*/</input>
  <parser>
    <docblock>
      <identifier>
        <name>Test</name>
      </identifier>
    </docblock>
    <messages>
      <message>1: Warning: Test: GTK-Doc comment block start token "/**" should not be followed by comment text:
/**Test
   ^</message>
    </messages>
  </parser>
</test>

<test>
  <input>/**
Test */</input>
  <parser>
    <docblock>
      <identifier>
        <name>Test</name>
      </identifier>
    </docblock>
    <messages>
      <message>2: Warning: Test: GTK-Doc comment block end token "*/" should not be preceded by comment text:
Test */
    ^</message>
    </messages>
  </parser>
</test>

<test>
  <input>/** Test
something */</input>
  <parser>
    <docblock>
      <identifier>
        <name>Test</name>
      </identifier>
      <description>something</description>
    </docblock>
    <messages>
      <message>1: Warning: Test: GTK-Doc comment block start token "/**" should not be followed by comment text:
/** Test
    ^</message>
      <message>2: Warning: Test: GTK-Doc comment block end token "*/" should not be preceded by comment text:
something */
         ^</message>
    </messages>
  </parser>
</test>

<test>
  <input>/**
Test
something */</input>
  <parser>
    <docblock>
      <identifier>
        <name>Test</name>
      </identifier>
      <description>something</description>
    </docblock>
    <messages>
      <message>3: Warning: Test: GTK-Doc comment block end token "*/" should not be preceded by comment text:
something */
         ^</message>
    </messages>
  </parser>
</test>

<test>
  <input>/**
Test
something **/</input>
  <parser>
    <docblock>
      <identifier>
        <name>Test</name>
      </identifier>
      <description>something</description>
    </docblock>
    <messages>
      <message>3: Warning: Test: GTK-Doc comment block end token "*/" should not be preceded by comment text:
something **/
         ^</message>
    </messages>
  </parser>
</test>

<test>
  <input>code goes here /** Test
something */ code goes here</input>
  <parser>
    <docblock>
      <identifier>
        <name>Test</name>
      </identifier>
      <description>something</description>
    </docblock>
    <messages>
      <message>1: Warning: Test: GTK-Doc comment block start token "/**" should not be preceded by code:
code goes here /** Test
              ^</message>
      <message>1: Warning: Test: GTK-Doc comment block start token "/**" should not be followed by comment text:
code goes here /** Test
                   ^</message>
      <message>2: Warning: Test: GTK-Doc comment block end token "*/" should not be followed by code:
something */ code goes here
                           ^</message>
      <message>2: Warning: Test: GTK-Doc comment block end token "*/" should not be preceded by comment text:
something */ code goes here
         ^</message>
    </messages>
  </parser>
</test>

<test>
  <!--
  Malformed comment block, signal the start of the comment block description followed
  by a parameter instead.
  -->
  <input>/**
 * SECTION:meepapp
 *
 * @short_description: the application class
 *
 * The application class handles ...
 */</input>
  <parser>
    <docblock>
      <identifier>
        <name>SECTION:meepapp</name>
      </identifier>
      <parameters>
        <parameter>
          <name>short_description</name>
          <description>the application class</description>
        </parameter>
      </parameters>
      <description>The application class handles ...</description>
    </docblock>
    <messages>
      <message>4: Warning: Test: '@short_description' parameter unexpected at this location:
 * @short_description: the application class
    ^</message>
    </messages>
  </parser>
</test>

</tests>
