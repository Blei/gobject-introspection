#!/usr/bin/env python
import os
import sys

sys.path.insert(0, '.')

import giscanner

def main(args):
    if len(args) == 1:
        print 'ERROR: Needs at least one filename.'
        return 0

    scan = giscanner.SourceScanner()
    for arg in args[1:]:
        filename = os.path.abspath(arg)
        scan.parse_file(filename)

    print '-'*30
    for symbol in scan.get_symbols():
        print symbol
        print symbol.ident, symbol.type
        print symbol.base_type.name
        print '-'*30

sys.exit(main(sys.argv))
